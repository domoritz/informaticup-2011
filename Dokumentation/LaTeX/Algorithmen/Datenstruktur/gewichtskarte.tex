\subsection{Gewichtskarte}

\paragraph{L"osungsidee}
Da viele Algorithmen simulieren, wie Automaten an den verschiedensten Stellen bewertet w"urden, war eine "Uberlegung um die Programmeffizienz zu steigern, eine zweidimensionale Karte vorauszuberechnen, die f"ur jede Koordinate die erwartete Bewertung beinhaltet. Da der Radius eines Automaten durch die Eingabedatei festgelegt ist, kann diese von fast jedem Algorithmus ben"otigte Gewichtskarte vorausberechnet werden.
Urspr"unglich wurde f"ur jede Koordinate \texttt{(x, y)} das umliegende Quadrat mit der Kantenl"ange des Kreisdurchmessers \texttt{[(x-r..x+r),(y-r..y+r)]} betrachtet: Mittels des Satzes des Pythagoras wurde bestimmt, ob der Punkt innerhalb des umliegenden Kreises liegt, und falls dies zutrifft, das Gewicht des darunter befindlichen Stadtteiles \texttt{getGewicht(x, y)} zu einer spezifischen Summe der Koordinate hinzuaddiert.
Dieses Verfahren war "au"serst ineffizient, da f"ur jede m"ogliche Koordinate viele Berechnungen durchgef"uhrt werden mussten.
Um dies zu vermeiden, wurde die folgende Optimierung vorgenommen: In einer separaten Variable der Gr"o"se \texttt{short Kreis = [2r, 2r]} wurde ein derartiger Kreis mittels pythagor"aischer Betrachtung vorberechnet. Sofern der Punkt im Kreis lag (also die Bedingung $(x-r)^2+(y-r)^2 \leq r^2$ erf"ullt ist) enth"alt das Kreisarray an der Stelle \texttt{(x,y)} den Wert \texttt{1}, ansonsten \texttt{0}. Aufsummiert wurde nun nicht mehr \texttt{getGewicht(x, y)}, sondern \texttt{getGewicht(x, y) * Kreis[x][y]}.
Um die ben"otigte Zeit zur Berechnung der Gewichtskarte weiter zu reduzieren, wurden die so genannten \textbf{Deltakreise} eingef"uhrt. Es ist n"amlich zu erkennen, dass das Gewicht des Pixels \texttt{(x+1, y)} auch aus dem Gewicht des Punktes \texttt{(x, y)} berechnet werden kann. Selbiges gilt f"ur \texttt{(x, y+1)} und \texttt{(x, y)}. Deshalb werden vergleichbare Arrays (\texttt{short deltakreis\_rechts = [2r+1, 2r]} und \texttt{short deltakreis\_unten = [2r, 2r+1]}) vorausberechnet, um die Anzahl der notwendigen Operationen weiter zu reduzieren. Dem Bildbereich dieser beiden Arrays wurde der Wert \texttt{-1} hinzugef"ugt. Als Berechnungsanweisung wird der gleiche Algorithmus wie f"ur den normalen Kreis angewandt (\textit{Multiplikation des Gewichts mit dem Inhalt des Arrays}).

% \paragraph{Programm-Dokumentation}

\paragraph{Laufzeitabsch"atzung}
Das Generieren der Gewichtskarte hängt von mehreren Faktoren ab: Von der Kartengr"o"se \texttt{Welt"-funk"-ti"-on."-get"-Max"-i"-ma"-le"-Brei"-te"-Hoehe(true) = A}, den Automatenradien \texttt{Welt.getRadiusAutomaten() = r} und dem Approximationsfaktor \texttt{Welt.getApproxrate() = a}. F"ur jeden Punkt der approximierten Karte, also insgesamt $ \frac{A}{a} $ Punkte, m"ussen die Referenz-/Deltakreis-Arrays durchlaufen werden, welche widerum eine Gr"o"se von $ 4 * r^2 $, bzw. vernachl"assigbar $ 4 * r * (r+1) $ besitzen. Daraus folgt, dass je Koordinate $ \frac{A * 4 * r^2}{a} $ Vergleichsoperationen durchgef"uhrt werden m"ussen. Das Ergebnis der Vergleichsoperation bestimmt, ob ein Wert addiert (subtrahiert) werden muss. Durchschnittlich findet dies alle $ \frac{2*2}{\pi} = \frac{4}{\pi} $ Koordinaten statt.
